document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".form-main-register");if(e){var t=e.querySelector('[data-role="error-messages"]'),r=e.querySelector('[data-role="captcha-field"]');r&&(r.querySelector("img"),r.addEventListener("click",(function(e){if("IMG"===e.target.tagName.toUpperCase()){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){var e=JSON.parse(t.response);200===t.status&&(r.innerHTML=e.CAPTCHA_HTML)}},t.open("GET","./?action=getCaptcha"),t.send()}})));var a=!1;e.addEventListener("submit",(function(n){if(n.preventDefault(),a)return!1;var o=new XMLHttpRequest;console.log("@todo preloader start"),a=!0,t||(t.innerHTML=""),o.onreadystatechange=function(){if(4===o.readyState){var n=JSON.parse(o.response);if(200===o.status&&"Y"===n.SUCCESS){var s=e.querySelector(".form-success");s&&(s.innerHTML=n.SUCCESS_MESSAGE)}else i=n.ERRORS,t&&(t.innerHTML=Object.values(i).join("<br>\n"));console.log(n),a=!1,console.log("@todo preloader stop"),r&&(r.innerHTML=n.CAPTCHA_HTML)}var i},o.open("POST",n.target.getAttribute("action")||"./"),o.send(new FormData(n.target))}));var n=e.querySelector('[type="submit"]');e.querySelector('[name="privacy_accept"]').addEventListener("input",(function(e){e.target.checked?(n.classList.remove("disabled"),n.removeAttribute("disabled")):(n.classList.add("disabled"),n.setAttribute("disabled","true"))})),window.cloneValue=function(t,r){var a=e.querySelector(t),n=e.querySelector(r);a&&n&&(a.addEventListener("keyup",(function(e){n.value=e.target.value})),n.removeAttribute("readonly"))}}}));
