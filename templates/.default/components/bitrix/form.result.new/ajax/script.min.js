(()=>{"use strict";var e={"./assets/components/bitrix/form.result.new/ajax/src/Field.js":(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,{default:()=>i});const i=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"inputEl",null),o(this,"fieldEl",null),o(this,"errorEl",null),o(this,"builtInValue",""),o(this,"errors",[]),this.constructor==e)throw new Error("Abstract classes can't be instantiated.");if(!t)throw new Error("Input element is required.");this.inputEl=t,this.fieldEl=r,this.errorEl=n,this.builtInValue=t.value}var t,r,i;return t=e,(r=[{key:"getFieldName",value:function(){var e=this.inputEl.closest("[aria-label]");return e?e.getAttribute("aria-label"):""}},{key:"notEmpty",value:function(){return this.inputEl.value.length>0}},{key:"isDisabled",value:function(){return this.inputEl.hasAttribute("disabled")&&"false"!==this.inputEl.getAttribute("disabled")}},{key:"isRequired",value:function(){return this.inputEl.hasAttribute("required")&&"false"!==this.inputEl.getAttribute("required")}},{key:"validateRequired",value:function(){return!this.isRequired()||this.notEmpty()}},{key:"validate",value:function(){return this.errors=[],this.isRequired()&&!this.notEmpty()&&this.errors.push("required"),!this.errors.length}},{key:"getErrors",value:function(){return this.errors}},{key:"showErrors",value:function(e){this.fieldEl&&this.fieldEl.classList.add("error"),Array.isArray(e)&&(e=e.map((function(e){return"<span>".concat(e,"</span>")})).join("\n")),e||(e=""),e&&this.errorEl&&(this.errorEl.innerHTML=e)}},{key:"clearErrors",value:function(){this.fieldEl&&this.fieldEl.classList.remove("error"),this.errorEl&&(this.errorEl.innerHTML="")}},{key:"clearValue",value:function(){this.inputEl.value=this.builtInValue}}])&&n(t.prototype,r),i&&n(t,i),e}()},"./assets/components/bitrix/form.result.new/ajax/src/FieldEmail.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},u(e,t,r||e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}r.r(t),r.d(t,{default:()=>b});var f,p,y,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,r,n,s=l(f);function f(){return o(this,f),s.apply(this,arguments)}return t=f,(r=[{key:"validate",value:function(){return u(c(f.prototype),"validate",this).call(this),this.inputEl.value&&!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.inputEl.value).toLowerCase())&&this.errors.push("email"),!this.errors.length}}])&&i(t.prototype,r),n&&i(t,n),f}(r("./assets/components/bitrix/form.result.new/ajax/src/Field.js").default);y='input[type="email"]',(p="defaultSelector")in(f=h)?Object.defineProperty(f,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[p]=y;const b=h},"./assets/components/bitrix/form.result.new/ajax/src/FieldFile.js":(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r("./assets/components/bitrix/form.result.new/ajax/src/Field.js");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var b=new WeakSet,d=new WeakSet,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,r,n,o=l(s);function s(){var e;i(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(c(e=o.call.apply(o,[this].concat(r))),d),p(c(e),b),y(c(e),"allowedTypes",["image/jpeg","image/png","image/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingm","application/pdf"]),y(c(e),"size",10485760),e}return t=s,(r=[{key:"validate",value:function(){if(this.inputEl.files.length)for(file in this.inputEl.files)h(this,b,v).call(this,file)||this.errors.push("fileSize"),h(this,d,w).call(this,file)||this.errors.push("fileType");return!this.errors.length}}])&&u(t.prototype,r),n&&u(t,n),s}(n.default);function v(e){return e.size<=this.size}function w(e){return!!this.allowedTypes.filter((function(t){return t===e.type})).length}y(m,"defaultSelector",'input[type="file"]');const g=m},"./assets/components/bitrix/form.result.new/ajax/src/FieldPhone.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},u(e,t,r||e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}r.r(t),r.d(t,{default:()=>b});var f,p,y,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,r,n,s=l(f);function f(){return o(this,f),s.apply(this,arguments)}return t=f,(r=[{key:"notEmpty",value:function(){return this.inputEl.value.length>4}},{key:"validate",value:function(){return u(c(f.prototype),"validate",this).call(this),this.inputEl.value&&!/\+7\s?\({0,1}9[0-9]{2}\){0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}/.test(this.inputEl.value)&&this.errors.push("phone"),!this.errors.length}}])&&i(t.prototype,r),n&&i(t,n),f}(r("./assets/components/bitrix/form.result.new/ajax/src/Field.js").default);y='input[type="tel"]',(p="defaultSelector")in(f=h)?Object.defineProperty(f,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[p]=y;const b=h},"./assets/components/bitrix/form.result.new/ajax/src/FieldText.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}r.r(t),r.d(t,{default:()=>y});var s,c,f,p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=u(r);function r(){return o(this,r),t.apply(this,arguments)}return r}(r("./assets/components/bitrix/form.result.new/ajax/src/Field.js").default);f='input[type="text"], input:not([type])',(c="defaultSelector")in(s=p)?Object.defineProperty(s,c,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[c]=f;const y=p},"./assets/components/bitrix/form.result.new/ajax/src/Form.js":(e,t,r)=>{function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],u=!0,a=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,{default:()=>c});const c=function(){function e(t,r){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,e),s(this,"isFormProcessed",!1),s(this,"element",null),s(this,"fields",{}),s(this,"args",{}),this.args=u({field:"label",error:".message"},i),this.element=t;for(var l=function(){var e=n(f[c],2),i=e[0],u=e[1];o.fields[i]=Array.from(t.querySelectorAll(u)).map((function(e){var t=e.closest(o.args.field),n=t?t.querySelector(o.args.error):null;return r.fieldByType(i,e,t,n)}))},c=0,f=Object.entries(r.selectors);c<f.length;c++)l();t.addEventListener("submit",this.submit.bind(this))}var t,r,o;return t=e,(r=[{key:"validate",value:function(){return 0===this.fetch().filter((function(e){if(!e.validate()){var t=e.getFieldName().toLowerCase();return t&&(t+=" "),e.showErrors(e.errors.map((function(e){switch(e){case"required":return"Поле ".concat(t,"обязательно");case"email":return"Эл. адрес введен не верно";case"phone":return"Номер телефона введен не верно";default:return e}}))),!0}return e.clearErrors(),!1})).length}},{key:"beforeSubmit",value:function(){console.log("@todo start preloader"),this.isFormProcessed=!0}},{key:"afterSubmit",value:function(e){return console.log("@todo stop preloader"),this.isFormProcessed=!1,e()}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.isFormProcessed)return!1;if(this.validate()){this.beforeSubmit();var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var e=JSON.parse(r.response);return 200===r.status&&"Y"===e.SUCCESS?t.afterSubmit((function(){return t.success(e.SUCCESS_MESSAGE)})):t.afterSubmit((function(){return t.error(e.ERRORS)}))}},r.open("POST",this.element.getAttribute("action")||"./"),r.send(new FormData(this.element))}}},{key:"success",value:function(e){this.fetch().map((function(e){return e.clearValue()})),console.log(e)}},{key:"error",value:function(e){console.log(e)}},{key:"fetch",value:function(e){return e?this.fields.hasOwnProperty(e)?this.fields[e]:[]:Object.values(this.fields).flat()}}])&&l(t.prototype,r),o&&l(t,o),e}()},"./assets/components/bitrix/form.result.new/ajax/src/FormFieldTypeList.js":(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function i(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}r.r(t),r.d(t,{default:()=>a});var u=new WeakMap;const a=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,u,{writable:!0,value:{}}),n={},(r="selectors")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,a;return t=e,(r=[{key:"registerType",value:function(e,t){return i(this,u)[e]=t,this.selectors[e]=t.defaultSelector,this}},{key:"fieldByType",value:function(e,t,r,n){if(!i(this,u).hasOwnProperty(e))throw new Error("Not defined field type.");return new(i(this,u)[e])(t,r,n)}}])&&n(t.prototype,r),a&&n(t,a),e}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n);var e=r("./assets/components/bitrix/form.result.new/ajax/src/Form.js"),t=r("./assets/components/bitrix/form.result.new/ajax/src/FormFieldTypeList.js"),o=r("./assets/components/bitrix/form.result.new/ajax/src/FieldText.js"),i=r("./assets/components/bitrix/form.result.new/ajax/src/FieldPhone.js"),u=r("./assets/components/bitrix/form.result.new/ajax/src/FieldEmail.js"),a=r("./assets/components/bitrix/form.result.new/ajax/src/FieldFile.js");window.FormResultNew||(window.FieldTypeList=new t.default,window.FieldTypeList.registerType("text",o.default).registerType("phone",i.default).registerType("email",u.default).registerType("file",a.default),window.FormResultNew=e.default)})()})();
