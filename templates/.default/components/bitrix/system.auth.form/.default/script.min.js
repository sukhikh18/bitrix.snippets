document.addEventListener("DOMContentLoaded",(function(){var t=!1,e=document.forms["custom-auth-form"];if(!e)return!1;var n=e.querySelector(".custom-auth__errors");e.addEventListener("submit",(function(e){if(e.preventDefault(),t)return!1;var o=function(e){t=!1,console.log("@todo preloader stop"),e()};t=!0,console.log("@todo preloader start"),n&&(n.innerHTML="");var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var t=JSON.parse(r.response);return 200===r.status&&"Y"===t.SUCCESS?o((function(){console.log(t.BACKURL),t.BACKURL?window.location.href=t.BACKURL:window.location.reload()})):o((function(){var e;e=t.ERRORS,n&&(n.innerHTML=Object.values(e).join("<br>\n"))}))}},r.open("POST",e.target.getAttribute("action")||"./"),r.send(new FormData(e.target))}))}));
